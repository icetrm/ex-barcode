<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="JsBarcode.all.js" type="text/javascript"></script>
    <script src="bootstrap-5.3.3/js/bootstrap.js" type="text/javascript"></script>
    <link rel="stylesheet" href="bootstrap-5.3.3/css/bootstrap.css">
    <link rel="stylesheet" href="style.css">
</head>

<script type="text/javascript">
    var barcodeFormat = "CODE128";
    var barcodeStringFormat = "xxxxxxxxxx";
    var barcodeValueStart = "0";
    var barcodeValueEnd = "1";
    var barcodeWidth = 2;
    var barcodeHeight = 100;

    window.onload = function () {
        renderBarcode(barcodeValueStart);
    }

    function generateBarcode(barcode_string_format, barcode_value_start) {
        barcode_string = barcode_string_format.replace(/x/g, "0").substring(0, barcode_string_format.length - barcode_value_start.length) + barcode_value_start;
        return barcode_string;
    }

    function onChangeFormat(value) {
        barcodeFormat = value;
        renderBarcode(barcodeValueStart);
    }

    function onChangeBarcodeValueStart(value) {
        barcodeValueStart = value;
        renderBarcode(barcodeValueStart);
    }

    function onChangeBarcodeValueEnd(value) {
        barcodeValueEnd = value;
    }

    function onChangeBarcodeWidth(value) {
        barcodeWidth = value;
        renderBarcode(barcodeValueStart);
    }

    function onChangeBarcodeHeight(value) {
        barcodeHeight = value;
        renderBarcode(barcodeValueStart);
    }

    function renderBarcode(value) {
        document.getElementById("barcodeValueStart").value = barcodeValueStart;
        document.getElementById("barcodeValueEnd").value = barcodeValueEnd;

        document.getElementById("customRange").value = barcodeWidth;
        document.getElementById("customRangeHeight").value = barcodeHeight;
        document.getElementById("barcodeWidthValue").innerHTML = barcodeWidth;
        document.getElementById("barcodeHeightValue").innerHTML = barcodeHeight;

        JsBarcode("#barcode", generateBarcode(barcodeStringFormat, value), {
            format: barcodeFormat,
            width: barcodeWidth,
            height: barcodeHeight
        });
        // JsBarcode("#barcode", "123456789012");
        // JsBarcode("#barcode")
        //     .options({ font: "OCR-B" }) // Will affect all barcodes
        //     .EAN13("1234567890128", { fontSize: 18, textMargin: 0 })
        //     .blank(20) // Create space between the barcodes
        //     .EAN5("12345", { height: 85, textPosition: "top", fontSize: 16, marginTop: 15 })
        //     .render();
    }

    function onClickPrint() {
        window.print();
    }

    function onClickSubmit() {
        document.getElementById("preview").innerHTML = "";
        for (let i = parseInt(barcodeValueStart); i <= parseInt(barcodeValueEnd); i++) {
            renderBarcode(i.toString());
            const barcodeCopyElement = document.getElementById("barcode").cloneNode(true);
            barcodeCopyElement.id = "barcode" + i.toString();
            document.getElementById("preview").appendChild(barcodeCopyElement);
        }
    }
</script>

<body>
    <div class="container">
        <div class="barcode-wrapper">
            <svg id="barcode"></svg>
        </div>
        <div class="form-wrapper">
            <div class="form-floating mb-3">
                <select class="form-select" id="floatingSelect" aria-label="Floating label select example"
                    onchange="onChangeFormat(this.value)">
                    <option value="CODE128">CODE128</option>
                    <option value="CODE128A">CODE128A</option>
                    <option value="CODE128B">CODE128B</option>
                </select>
                <label for="floatingSelect">Barcode Type</label>
            </div>
            <div class="">
                <label for="customRange" class="form-label">Barcode Width: <span id="barcodeWidthValue"></span></label>
                <input type="range" class="form-range" min="1" max="5" id="customRange" onchange="onChangeBarcodeWidth(this.value)">
            </div>
            <div class="">
                <label for="customRange" class="form-label">Barcode Height: <span id="barcodeHeightValue"></span></label>
                <input type="range" class="form-range" min="50" max="150" id="customRangeHeight" onchange="onChangeBarcodeHeight(this.value)">
            </div>
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="barcodeValueStart" placeholder="" onchange="onChangeBarcodeValueStart(this.value)">
                <label for="barcodeValueStart">Start Value</label>
            </div>
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="barcodeValueEnd" placeholder="" onchange="onChangeBarcodeValueEnd(this.value)">
                <label for="barcodeValueEnd">End Value</label>
            </div>
           
            <div class="form-floating">
                <button type="button" class="btn btn-primary" onclick="onClickPrint()">Print</button>
                <button type="button" class="btn btn-primary" onclick="onClickSubmit()">Submit</button>
            </div>
        </div>
    </div>
    <div id="preview"></div>

</body>

</html>